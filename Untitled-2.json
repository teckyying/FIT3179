{
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json", 
    "width": 950, "height": 500, 
    "title": "World Happiness", 
    "background": "#f6f4f3",
    "projection": {"type": "equirectangular"},
     "params": [ {  
        "name": "Category_Selection",
        "bind": { 
          "input": "select", 
          "options": [null, "North America", "South America", "Europe", "Africa", "Asia","Oceania" ], 
          "labels":["Worldwide", "North America", "South America", "Europe", "Africa","Asia","Oceania"], 
          "name": "Continent Selection: " 
        } 
      },{
        "name": "Year_Slider", 
        "value": 2019, 
        "bind": { 
          "input": "range", "min": 2015,
          "max": 2019, 
          "step": 1, 
          "name": "Year"
          }
      }
    ],
    "layer": [ { 
      "data": { 
        "url": "https://raw.githubusercontent.com/KaneSec/vega_lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
      "format": {
        "type": "topojson", 
        "feature": "ne_110m_admin_0_countries"} 
      },
      "mark": {
        "type": "geoshape"
      } },{ 
      "data": { 
        "url": "https://raw.githubusercontent.com/teckyying/FIT3179/master/data/world_happiness_2015_to_2019.csv" }, 
      "transform": [ 
        {"filter": "Category_Selection == null || datum.Continent == Category_Selection"},
        {"filter": "datum.Year == Year_Slider"}
      ],
      "encoding": { 
        "longitude": 
            {"field": "X", "type": "quantitative"}, 
        "latitude": 
            {"field": "Y", "type": "quantitative"} 
      },
      "layer": [ { 
        "mark":"circle",
        "encoding": { 
        "color":{
        "field": "Hapiness_Score",
        "type":"quantitative",
        "scale": { 
          "type": "threshold",
          "domain": [1, 2, 3, 4, 5, 6, 7], 
          "range":["#cccccc","#fcbec0","#faa9b8","#f571a5","#ec539d","#db3695","#c41b8a","#a90880","#8d0179"],
          "scheme": "redpurple"
        }
                },
      "opacity": { "value": 0.8 },
      "size": {
        "field": "Happiness_Score", 
        "type": "quantitative", 
        "scale":{
          "domain": [1, 2, 3, 4, 5, 6, 7],
          "range":["#cccccc","#fcbec0","#faa9b8","#f571a5","#ec539d","#db3695","#c41b8a","#a90880","#8d0179"], 
          "clamp": true
        }
      },
      "tooltip": [
          {"field": "properties.NAME", "type": "nominal", "title": "Country"},
           {"field": "no_score", "type": "nominal", "title": "Happiness Score"
          }
        ]
          }
          } ] 
      } ] 
      }